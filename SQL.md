# SQL

Reviewed: No
Type: Reading

# 1- Create, Alter, Update, Delete,Truncate, Case_when,Show, Desc, etc.

```sql
SHOW TABLES                                 > SHOWS LIST OF TABLES
DESC TABLE                                  > DESCRIBES TABLE 
TRUNCATE TABLE TABLE_NAME                   > DELETE ALL DATA OF THE TABLE

UPDATE TABLE_NAME 
SET "COLUMN=VALUE" 
WHERE "CONDITION"

DELETE FROM TABLE_NAME
WHERE "CONDITION"

ALTER TABLE TABLE_NAME
ADD COLUMN_NAME DATATYPE

ALTER TABLE TABLE_NAME
DROP COLUMN COLUMN_NAME

ALTER TABLE TABLE_NAME
RENAME TO NEW_NAME

ALTER TABLE ALTER COLUMN 
COLUMN_NAME DATA_TYPE

ALTER TABLE TABLE_NAME
ADD CONSTRAINT CONSTRAINT_NAME CONSTRAINT_TYPE COLUMN_NAME

SELECT AMOUNT_OF_ORDERS,
			CASE WHEN AMOUNT_OF_ORDERS>100000 THEN '100K'
					 WHEN AMOUNT_OF_ORDERS>1000 AND AMOUNT_OF_ORDERS<100000 THEN 'MEDIUM'
				ELSE 'SMALL'
			END AS CATEGORIZED 

CREATE TABLE TABLE_NAME (

	STUDENT INT PRIMARY KEY,
	FIRST_NAME VARCHAR(50),
	AGE INT(8),
	CHECK(AGE>=18)

)

# TIP: 'ON UPDATE CASCADE' MEANS UPDATE CONNECTED VALUES WHEN I UPDATED IT ELSEWHERE

```

# 2-SELECT (ALIAS,MATH,DISTINCT,COUNTS)

```sql
SELECT * 
SELECT COLUMN_NAME AS 'NAME'
SELECT AGE+10 AS 'AGE_PLUS'
SELECT DISTINCT city as dis_city,DISTINCT AGE AS DIS_AGE # NOTE THAT THE NUMBER OF ROWS TO SHOW SHOULD BE EQUAL

# SUBQUERY SELECT STATEMENT 
WHERE CITY_ID IN (SELECT DISTINCT CITY AS C             > note that here the subquery select statement retrieve different values and we should use IN
									FROM CITY)

WHERE CITY_ID like OR = (SELECT count(CITY) AS C        > note that here the subquery select statment retrieve one value and we should use LIKE OR = 
									FROM CITY)

# WE CAN USE THESE IN SELECT STATEMENT 
		COUNT(column_name): Returns the number of rows that match the specified condition or column name.
    SUM(column_name): Calculates the sum of all values in the specified column.
    AVG(column_name): Computes the average of all values in the specified column.
    MIN(column_name): Retrieves the minimum value from the specified column.
    MAX(column_name): Retrieves the maximum value from the specified column.
    CONCAT(column1, column2): Concatenates the values of two columns together.
```

# 3- WHERE

```sql
# WE USE CONDITIONS IN WHERE STATEMENT 

WHERE AGE >= 20
WHERE AGE <= 20 
WHERE AGE <> 20 
WHERE AGE != 20
WHERE AGE  = 20

#FOR DATETIME STAMP WE SHOULD USE ' COMMA 
WHERE DATA = '1990-01-01'

#AND OR STATEMENTS (TIP: 'AND' ALWAYS EVALUATED FIRST)

WHERE AGE>80 OR AGE<20
WHERE AGE<80 AND AGE>20

# WE CAN USE MULTIPLE CONDITIONS

WHERE AGE>10 AND AGE<20,
			AGE>30 AND AGE<40

# IN, NOT IN TO COMBINE MULTIPLE 'OR' STATEMENET 

WHERE NAME IN ('HENRY','SHOJA','ARAZ','MINA') >> WHERE NAME='HENRY' OR NAME='SHOJA' OR NAME= 'ARAZ' OR NAME = 'MINA'

# BETWEEN AND USED TO COMBINE TWO AND STATEMENT 

WHERE AGE BETWEEN 10 AND 20 >> WHERE AGE<20 AND AGE>10

#LIKE NOT LIKE ARE USED TO SEARCH IN STRING FORMAT 

WHERE NAME LIKE 
				
								1- NAME LIKE 'B%'     START WITH B 
								2- NAME LIKE '%B'     ENDS WITH B
								3- NAME LIKE '%B%'    B IS SOMEWHERE MIDDLE 
								4- NAME LIKE '--B'    EXACTLY 3 CHARACHTER ENDS WITH B

# REGEXP IS POWERFUL THAN LIKE 

WHERE NAME REGEXP:
							
								1- NAME REGEXP '^FIELD' START WITH FIELD
								2- NAME REGEXP 'FIELD$' EDNS WITH FIELD 
								3- NAME REGEXP 'FIELD' CONTAINS FIELD 
								4- NAME REGEXP 'FIELD|MAC' CONTAINS FIELD OR MAC
								5- NAME REGEXP '^FIELD|MAC$' CONTAIN WORDS STARTS WITH FIELD OR ENDS WITH MAC$
								6- NAME REGEXP '[GIM]B' CONTAINS GB OR IB OR MB
								7- NAME REGEXP '[A-F]B' CONTAINS ALL CHARACHTERS FROM A TO F AND ENDS WITH B

# CAN CHECK IF A VALUE IS NULL OR NOT WITH IS NULL AND IS NOT NULL

WHERE AGE IS NULL
WHERE AGE IS NOT NULL

```

# 4- JOINS

```sql
# WE USE JOIN TO COMBINE MULTIPLE TABLES AND APPLY WHERE CLAUSE TO ALL TABLES
# LEFT TABLE IS THE TABLE NAME IN FROM CLAUSE 
# SIMPLE JOIN OR INNER JOIN (DO NOT HAVE RIGHT OR LEFT)
SELECT * 
FROM LEFT_TABLE L
JOIN TABLE_NAME T
		ON T.ID=L.ID

# SELF JOIN TO USE IF WE HAVE COLUMN IN A TABLE THAT REFERES TO ANOTHER COLUMN IN THAT SAME TABLE

SELECT * 
FROM LEFT_TABLE L
JOIN LEFT_TABLE T
		ON L.ID=T.INNER_ID 

# CROSS JOIN RETURNS ALL VALUES IN BOTH TABLES AND SET NULL IF THERE IS NOT ANY MATCHIN VALUES

SELECT *
FROM LEFT_TABLE L
CROSS JOIN RIGHT_TABLE R
			ON R.ID=L.ID

# OUTTER JOIN WITH LEFT AND RIGHT. 

SELECT * 
FROM LEFT_TABLE L
LEFT JOIN RIGHT_TABLE R
		ON R.ID=L.ID

SELECT *
FROM LEFT_TABLE L
RIGHT JOIN RIGHT_TABLE R
			ON R.ID=L.ID

# WE CAN USE 'USING' IF THE COLUMNS HAVE SAME NAME 

SELECT *
FROM LEFT_TABLE L
JOIN RIGHT_TABLE R
USING (ID)

# JOINING MULTIPLE TABLES 

SELECT * 
FROM LEFT_TABLE L
JOIN RIGHT_TABLE R
		ON L.ID=R.ID
JOIN ANOTHER_TABLE A
		ON A.ID=L.ID
JOIN ANOTHER_TABLE T
		ON T.ID=R.ID

#USING UNION TO COMBINE DIFFERENT SELECT STATEMENT 

SELECT *
FROM LEFT_TABLE L
JOIN RIGHT_TABLE R
		ON R.ID=L.ID
UNION 
SELECT * 
FROM ANOTHER_TABLE A
WHERE 'CONDITION TO RETRIVE SAME NUMBER OF ROWS'
```

# 5- GROUP BY AND ORDER BY

```sql
# TO USE GROUP BY YOU HAVE TO INCLUDE ONE OF COUNTING FUNCTION IN SELECT STATEMENT AND GROUP BY SPECIFIC COLUMN

SELECT AGE, COUNT(AGE)
FROM TABLE_NAME
GROUP BY AGE
# NOW INSTEAD OF USING WHERE CLAUSE WE HAVE TO USE HAVING CLAUSE
HAVING COUNT(AGE) BETWEEN 10 AND 5
# NOW WE CAN ORDER BY ANYTHING
ORDER BY NAME DESC, AGE DESC
```

 

# 6- INSERTION

```sql
# CREATE ANOTHER TABLE OF RESULTS

CREATE TABLE TABLE_NAME AS (
SELECT * 
FROM TABLE_NAME
WHERE AGE>20
)
# INSERT MULTIPLE VALUES TO A TABLE 

INSERT INTO TABLE_NAME (ID, CUSTOMER_NAME,AGE)
	VALUE (DEFAULT,'STRING1',12),
				(DEFAULT,'STRING2',20)
```
